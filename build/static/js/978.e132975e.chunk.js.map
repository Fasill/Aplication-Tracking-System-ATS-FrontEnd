{"version":3,"file":"static/js/978.e132975e.chunk.js","mappings":"8OAyBA,IACA,EAAe,IAA0B,8D,mBC8HzC,EA/IgB,SAACA,GAAW,IAADC,EAErBC,GAAWC,EAAAA,EAAAA,MACjBC,GAAwCC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAhDI,EAAYF,EAAA,GAAEG,EAAeH,EAAA,GACpCI,GAAkCL,EAAAA,EAAAA,WAAS,GAAMM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAA1CE,EAASD,EAAA,GAAEE,EAAYF,EAAA,GAC9BG,GAAgCT,EAAAA,EAAAA,UAAS,CAAEU,KAAM,KAAKC,GAAAT,EAAAA,EAAAA,GAAAO,EAAA,GAA/CG,EAAQD,EAAA,GAAEE,EAAWF,EAAA,GAC5BG,GAA4Bd,EAAAA,EAAAA,UAAS,IAA5Be,GAA+Bb,EAAAA,EAAAA,GAAAY,EAAA,GAAhB,GACxBE,GAA8BhB,EAAAA,EAAAA,WAAS,GAAKiB,GAAAf,EAAAA,EAAAA,GAAAc,EAAA,GAArCE,EAAOD,EAAA,GAAEE,EAAUF,EAAA,IAE1BG,EAAAA,EAAAA,YAAU,WAEeC,aAAaC,QAAQ,mBAI1CzB,EAAS,mBAGb,GAAG,IAED,IAAM0B,EAASC,EAAAA,KAAaC,MAAM,CAChCf,KAAMc,EAAAA,KAEHE,SAAS,oBACTC,QAAQ,UAAW,qCAIxBC,GAA0DC,EAAAA,EAAAA,IAAQ,CAChEC,UAAUC,EAAAA,EAAAA,GAAYR,KADhBS,EAAQJ,EAARI,SAAUC,EAAYL,EAAZK,aAA2BC,EAAMN,EAAnBO,UAAaD,QAc7Cd,EAAAA,EAAAA,YAAU,WACR,IAAMgB,EAAcC,OAAOC,OAAO1B,GAAU2B,OAAM,SAACC,GAAK,MAAe,KAAVA,CAAY,IACzErB,EAAWiB,EACf,GAAG,CAACxB,IAyDF,OACE6B,EAAAA,EAAAA,MAAA,QAAMC,SAAUT,GAtCD,WACf7B,GAAgB,GAEhB,IAAMuC,EAAQtB,aAAaC,QAAQ,SAGnCsB,EAAAA,EAAMC,KAAK,GAADC,OAAIC,EAAAA,EAAW,eAAe,CAAC,IAAMC,SAASpC,EAASF,KAAM,IAAI,MAAQiC,IAChFM,MAAK,SAACC,GACL,IAAMP,EAAQO,EAAIC,KAAKR,MACvBS,QAAQC,IAAIH,EAAIC,MAChBtD,EAAS,SACTwB,aAAaiC,QAAQ,iBAAiB,IAElCX,IACFtB,aAAaiC,QAAQ,QAASX,GACjCtB,aAAaiC,QAAQ,iBAAiB,IAEnCzC,EAAY,CAAEH,KAAM,MAEtBG,EAAY,CAAEH,KAAM,KAEpBN,GAAgB,EAClB,IACCmD,OAAM,SAACC,GACNJ,QAAQI,MAAM,SAAUA,GAEpBA,EAAMC,UAAYD,EAAMC,SAASN,MAAQK,EAAMC,SAASN,KAAKO,QAC/D3C,EAAgByC,EAAMC,SAASN,KAAKO,SAEpC3C,EAAgB,wCAElBX,GAAgB,GAChBS,EAAY,CAAEH,KAAM,IAEtB,GACJ,IAG0CiD,UAAU,yDAAwDC,SAAA,EAExGC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,uCAAsCC,SAAEjE,EAAMmE,UAC5DrB,EAAAA,EAAAA,MAAA,OAAKkB,UAAU,2CAA0CC,SAAA,EAACC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,iBAAiBI,IAAI,QAAQC,IAAKC,KAAYJ,EAAAA,EAAAA,KAAA,KAAGF,UAAU,iBAAgBC,SAAC,2EAIrJnB,EAAAA,EAAAA,MAAA,OAAKkB,UAAU,uDAAsDC,SAAA,EACnEnB,EAAAA,EAAAA,MAAA,SAAAmB,SAAA,CAAO,sBAAkBC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,mBAAkBC,SAAoB,QAApBhE,EAAEsC,EAAOgC,mBAAW,IAAAtE,OAAA,EAAlBA,EAAoB8D,cACjFG,EAAAA,EAAAA,KAAA,SAAAM,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACEC,KAAK,OACLC,KAAK,QACDrC,EAAS,SAAO,IACpBQ,MAAO5B,EAASF,KAChB4D,SApFa,SAACC,GACpB,IAAAC,EAAwBD,EAAEE,OAAlBJ,EAAIG,EAAJH,KAAM7B,EAAKgC,EAALhC,MACd3B,GAAWsD,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EACRvD,GAAQ,IAAA8D,EAAAA,EAAAA,GAAA,GACVL,EAAO7B,IAGZ,EA8EQmB,UAAU,qIAKdlB,EAAAA,EAAAA,MAAA,KAAGkB,UAAU,wDAAuDC,SAAA,CAAC,mCACpCC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,oDAAoDgB,QA7E3F,WACZnE,GAAa,GACb,IAAMmC,EAAQtB,aAAaC,QAAQ,SAEnCsB,EAAAA,EAAMC,KAAK,GAADC,OAAIC,EAAAA,EAAW,aAAY,CAACJ,MAAAA,IACrCM,MAAK,SAAC2B,GAELxB,QAAQC,IAAIuB,EAAYzB,KAAKO,SAC7B,IAAMmB,EAAiBD,EAAYzB,KAAK0B,eACxCxD,aAAaiC,QAAQ,iBAAiBuB,EACxC,IACItB,OAAM,SAACuB,GACP1B,QAAQI,MAAM,qBAAsBsB,GACpC/D,EAAgB,8DAChBP,GAAa,EACb,GAEN,EA4D0HoD,SACnHrD,GAAYsD,EAAAA,EAAAA,KAAA,QAAMF,UAAU,uCAAgD,oBAK/EE,EAAAA,EAAAA,KAAA,UACEF,UAAS,mBAAAb,OAAqB5B,EAAU,2DAA6D,2CAA0C,sCAC/IkD,KAAK,SACLW,SAAU5E,EAAayD,SAEtBzD,GAAe0D,EAAAA,EAAAA,KAAA,QAAMF,UAAU,uCAA+C,cAMvF,ECzIA,EAXoB,WAElB,OACElB,EAAAA,EAAAA,MAAA,OAAKkB,UAAU,wJAAuJC,SAAA,EACpKC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,yBAAwBC,SAAC,wBACvCC,EAAAA,EAAAA,KAAGmB,EAAO,CAAClB,OAAS,OAI1B,C,uDCXO,IAAMf,EAAc,+C","sources":["assets/emailIcon.svg","components/Forms/otpForm.js","pages/LoginAndSignUp/otpVerifier.js","utils/Links.js"],"sourcesContent":["var _path;\nvar _excluded = [\"title\", \"titleId\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport * as React from \"react\";\nfunction SvgEmailIcon(_ref, svgRef) {\n  var title = _ref.title,\n    titleId = _ref.titleId,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 16,\n    height: 16,\n    fill: \"currentColor\",\n    className: \"bi bi-envelope\",\n    viewBox: \"0 0 16 16\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z\"\n  })));\n}\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEmailIcon);\nexport default __webpack_public_path__ + \"static/media/emailIcon.ceed57e9483391a79813f313693eb103.svg\";\nexport { ForwardRef as ReactComponent };","import { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { useNavigate } from 'react-router-dom';\nimport emailIcon from '../../assets/emailIcon.svg';\nimport { backEndLink } from '../../utils/Links.js';\n\nconst OtpForm = (props) => {\n  // State variables\nconst navigate = useNavigate();\nconst [isSubmitting, setIsSubmitting] = useState(false); // For form submission state\nconst [isSending, setIsSending] = useState(false);\nconst [formData, setFormData] = useState({ code: '' }); // Form data\nconst [, setErrorMessage] = useState(''); // Error message from the server\nconst [isEmpty, setIsEmpty] = useState(true)\n\nuseEffect(() => {\n  // Check if the 'otpverifyToken' cookie exists\n  const otpverifyToken = localStorage.getItem(\"otpverifyToken\");\n\n  if (!otpverifyToken) {\n    // If the cookie does not exist, navigate to the '/login' page\n    navigate('/signup/supplier'); // Replace '/login' with the actual login page route\n    return; // Exit the useEffect if the token does not exist\n  }\n}, []); // Empty dependency array means this effect runs once after the component mounts\n  // Form vali dation schema using Yup\n  const schema = yup.object().shape({\n    code: yup\n      .string()\n      .required('Code is required')\n      .matches(/^\\d{6}$/, 'Code must be a six-digit number'),\n  });\n\n  // Form hook setup\n  const { register, handleSubmit, formState: { errors } } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  // Handle input changes\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value,\n    });\n    // setIsEmpty(formData.code != ''? false:true )\n  };\n\n  useEffect(() => {\n    const isFormEmpty = Object.values(formData).every((value) => value === '');\n    setIsEmpty(isFormEmpty);\n}, [formData]);\n\nconst sendOtp = ()=>{\n    setIsSending(true)\n    const token = localStorage.getItem('token')\n\n    axios.post(`${backEndLink}/send-otp`,{token})\n    .then((otpResponse) => {\n    \n      console.log(otpResponse.data.message);\n      const otpverifyToken = otpResponse.data.otpverifyToken \n      localStorage.setItem(\"otpverifyToken\",otpverifyToken)\n    }) \n       .catch((otpError) => {\n        console.error('Error sending OTP:', otpError);\n        setErrorMessage('An error occurred during OTP generation. Please try again.');\n        setIsSending(false)\n        })\n    \n  }\n  const onSubmit = () => {\n    setIsSubmitting(true);\n    // Create a FormData object and append your data\n    const token = localStorage.getItem('token'); // Retrieve the token from localStorage\n    // console.log(formData.code)\n    // Send a POST request to the server using Axios\n    axios.post(`${backEndLink}/verify-otp`, {'otp':parseInt(formData.code, 10),'token':token})\n      .then((res) => {\n        const token = res.data.token;\n        console.log(res.data);\n        navigate('/home'); // Navigate to the home page\n        localStorage.setItem(\"otpverifyToken\",'');\n\n        if (token) {\n          localStorage.setItem('token', token); // Store the token in local storage\n       localStorage.setItem(\"otpverifyToken\",'');\n\n          setFormData({ code: '' }); // Clear form fields\n        }\n        setFormData({ code: '' }); // Clear form fields\n\n        setIsSubmitting(false);\n      })\n      .catch((error) => {\n        console.error('Error:', error);\n  \n        if (error.response && error.response.data && error.response.data.message) {\n          setErrorMessage(error.response.data.message); // Set error message from the server\n        } else {\n          setErrorMessage('An error occurred. Please try again.');\n        }\n        setIsSubmitting(false);\n        setFormData({ code: '' }); // Clear form fields\n\n      });\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)} className=\"grid gap-4 h-full max-w-[20rem]  w-full max-h-[18rem] \">\n      {/* Form Header */}\n      <h1 className=\"m-auto text-black text-3xl font-bold\">{props.tittle}</h1>\n      <div className='flex m-0  items-start justify-center p-0'><img className='self-start p-1' alt='email' src={emailIcon}/><p className='p-0 text-black'>We sent you a code to your email please enter the code to sign in.</p></div>\n     \n      {/* <p className='text-black'>Check Your Email and Enter the 6-Digit Code Below</p> */}\n      {/* Code Input */}\n      <div className=\"p-0 m-0 text-black flex items-center justify-between\">\n        <label>Enter 6-Digit Code<span className=\"text-red-600 m-0\">{errors.phoneNumber?.message}</span></label>\n        <input\n          type=\"text\"\n          name=\"code\"\n          {...register(\"code\")}\n          value={formData.code}\n          onChange={handleChange}\n          className=\"p-3 border h-11 max-w-[10rem] w-full border-gray-400 rounded-md focus:outline-none focus:border-blue-500 bg-transparent m-0\"\n        />\n      </div>\n\n      {/* Forgot Password Link */}\n      <p className=\"font-bold text-[14px] self-end justify-self-start m-0\">\n        If you didn't receive the code <span className=\"text-blue-500 hover:text-blue-400  cursor-pointer\" onClick={sendOtp}>\n        {isSending ? <span className=\"loading loading-spinner loading-md\"></span> :  \"Resend Code\"}\n        </span>\n      </p>\n\n      {/* Submit Button */}\n      <button\n        className={`rounded-md h-11 ${isEmpty ? 'border pointer-events-none border-gray-400 text-blue-400' : 'bg-blue-500 text-white hover:bg-blue-400'} rounded-md h-11 font-bold text-xl`}\n        type=\"submit\"\n        disabled={isSubmitting}\n      >\n        {isSubmitting ? <span className=\"loading loading-spinner loading-md\"></span> : \"Confirm\"}\n      </button>\n\n      \n    </form>\n  );\n};\n\nexport default OtpForm;\n","import OtpForm from '../../components/Forms/otpForm.js'\n\nconst OtpVerifier = () => {\n\n  return ( \n    <div className=\"bg-white w-[35rem] grid gap-5 items-center justify-center p-[2rem]   shadow-[rgba(50,50,93,0.25)_0px_6px_12px_-2px,_rgba(0,0,0,0.3)_0px_3px_7px_-3px]\">\n      <h1 className='font-bold text-[30px] '>EMAIL VERIFICATION</h1>\n      <  OtpForm tittle = \"\" />\n    </div>\n  );\n  \n}\n\nexport default OtpVerifier;\n","export const backEndLink = 'https://test-back-end-dszgwhplxa-el.a.run.app';\n//export const backEndLink ='http://localhost:8080';\n\n"],"names":["props","_errors$phoneNumber","navigate","useNavigate","_useState","useState","_useState2","_slicedToArray","isSubmitting","setIsSubmitting","_useState3","_useState4","isSending","setIsSending","_useState5","code","_useState6","formData","setFormData","_useState7","setErrorMessage","_useState9","_useState10","isEmpty","setIsEmpty","useEffect","localStorage","getItem","schema","yup","shape","required","matches","_useForm","useForm","resolver","yupResolver","register","handleSubmit","errors","formState","isFormEmpty","Object","values","every","value","_jsxs","onSubmit","token","axios","post","concat","backEndLink","parseInt","then","res","data","console","log","setItem","catch","error","response","message","className","children","_jsx","tittle","alt","src","emailIcon","phoneNumber","_objectSpread","type","name","onChange","e","_e$target","target","_defineProperty","onClick","otpResponse","otpverifyToken","otpError","disabled","OtpForm"],"sourceRoot":""}