"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[978],{9978:function(e,t,a){a.r(t),a.d(t,{default:function(){return x}});var o=a(4942),n=a(1413),r=a(9439),s=a(2791),l=a(1243),c=a(1134),i=a(6727),d=a(4695),u=a(7689);var m=a.p+"static/media/emailIcon.ceed57e9483391a79813f313693eb103.svg",p=a(9158),f=a(184),g=function(e){var t,a=(0,u.s0)(),g=(0,s.useState)(!1),x=(0,r.Z)(g,2),h=x[0],b=x[1],v=(0,s.useState)(!1),j=(0,r.Z)(v,2),y=j[0],k=j[1],N=(0,s.useState)({code:""}),I=(0,r.Z)(N,2),S=I[0],Z=I[1],w=(0,s.useState)(""),C=(0,r.Z)(w,2)[1],_=(0,s.useState)(!0),T=(0,r.Z)(_,2),E=T[0],A=T[1];(0,s.useEffect)((function(){localStorage.getItem("otpverifyToken")||a("/signup/supplier")}),[]);var O=i.Ry().shape({code:i.Z_().required("Code is required").matches(/^\d{6}$/,"Code must be a six-digit number")}),P=(0,c.cI)({resolver:(0,d.X)(O)}),R=P.register,q=P.handleSubmit,D=P.formState.errors;(0,s.useEffect)((function(){var e=Object.values(S).every((function(e){return""===e}));A(e)}),[S]);return(0,f.jsxs)("form",{onSubmit:q((function(){b(!0);var e=localStorage.getItem("token");l.Z.post("".concat(p.a,"/verify-otp"),{otp:parseInt(S.code,10),token:e}).then((function(e){var t=e.data.token;console.log(e.data),a("/home"),localStorage.setItem("otpverifyToken",""),t&&(localStorage.setItem("token",t),localStorage.setItem("otpverifyToken",""),Z({code:""})),Z({code:""}),b(!1)})).catch((function(e){console.error("Error:",e),e.response&&e.response.data&&e.response.data.message?C(e.response.data.message):C("An error occurred. Please try again."),b(!1),Z({code:""})}))})),className:"grid gap-4 h-full max-w-[20rem]  w-full max-h-[18rem] ",children:[(0,f.jsx)("h1",{className:"m-auto text-black text-3xl font-bold",children:e.tittle}),(0,f.jsxs)("div",{className:"flex m-0  items-start justify-center p-0",children:[(0,f.jsx)("img",{className:"self-start p-1",alt:"email",src:m}),(0,f.jsx)("p",{className:"p-0 text-black",children:"We sent you a code to your email please enter the code to sign in."})]}),(0,f.jsxs)("div",{className:"p-0 m-0 text-black flex items-center justify-between",children:[(0,f.jsxs)("label",{children:["Enter 6-Digit Code",(0,f.jsx)("span",{className:"text-red-600 m-0",children:null===(t=D.phoneNumber)||void 0===t?void 0:t.message})]}),(0,f.jsx)("input",(0,n.Z)((0,n.Z)({type:"text",name:"code"},R("code")),{},{value:S.code,onChange:function(e){var t=e.target,a=t.name,r=t.value;Z((0,n.Z)((0,n.Z)({},S),{},(0,o.Z)({},a,r)))},className:"p-3 border h-11 max-w-[10rem] w-full border-gray-400 rounded-md focus:outline-none focus:border-blue-500 bg-transparent m-0"}))]}),(0,f.jsxs)("p",{className:"font-bold text-[14px] self-end justify-self-start m-0",children:["If you didn't receive the code ",(0,f.jsx)("span",{className:"text-blue-500 hover:text-blue-400  cursor-pointer",onClick:function(){k(!0);var e=localStorage.getItem("token");l.Z.post("".concat(p.a,"/send-otp"),{token:e}).then((function(e){console.log(e.data.message);var t=e.data.otpverifyToken;localStorage.setItem("otpverifyToken",t)})).catch((function(e){console.error("Error sending OTP:",e),C("An error occurred during OTP generation. Please try again."),k(!1)}))},children:y?(0,f.jsx)("span",{className:"loading loading-spinner loading-md"}):"Resend Code"})]}),(0,f.jsx)("button",{className:"rounded-md h-11 ".concat(E?"border pointer-events-none border-gray-400 text-blue-400":"bg-blue-500 text-white hover:bg-blue-400"," rounded-md h-11 font-bold text-xl"),type:"submit",disabled:h,children:h?(0,f.jsx)("span",{className:"loading loading-spinner loading-md"}):"Confirm"})]})},x=function(){return(0,f.jsxs)("div",{className:"bg-white w-[35rem] grid gap-5 items-center justify-center p-[2rem]   shadow-[rgba(50,50,93,0.25)_0px_6px_12px_-2px,_rgba(0,0,0,0.3)_0px_3px_7px_-3px]",children:[(0,f.jsx)("h1",{className:"font-bold text-[30px] ",children:"EMAIL VERIFICATION"}),(0,f.jsx)(g,{tittle:""})]})}},9158:function(e,t,a){a.d(t,{a:function(){return o}});var o="http://localhost:8080"}}]);
//# sourceMappingURL=978.4f987546.chunk.js.map