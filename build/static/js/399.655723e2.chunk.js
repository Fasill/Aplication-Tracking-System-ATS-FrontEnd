"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[399],{399:function(e,t,s){s.r(t),s.d(t,{default:function(){return x}});var a=s(9439),n=s(2791),r=s(4942),o=s(1413),l=s(1243),i=s(7689),d=s(1134),u=s(6727),c=s(4695),m=s(9158),f=s(184),b=function(e){var t,s,b=(0,n.useState)(!1),p=(0,a.Z)(b,2),x=p[0],h=p[1],g=(0,n.useState)(!0),v=(0,a.Z)(g,2),j=v[0],w=v[1],N=(0,i.s0)(),y=(0,n.useState)({email:"",password:""}),Z=(0,a.Z)(y,2),S=Z[0],k=Z[1],C=(0,n.useState)(""),E=(0,a.Z)(C,2),I=E[0],_=E[1],q=u.Ry().shape({email:u.Z_().email("Invalid email format").required("Email is required"),password:u.Z_().required("Password is required")}),A=(0,d.cI)({resolver:(0,c.X)(q)}),U=A.register,O=A.handleSubmit,P=A.formState.errors,R=function(e){var t=e.target,s=t.name,a=t.value;k((0,o.Z)((0,o.Z)({},S),{},(0,r.Z)({},s,a)))};(0,n.useEffect)((function(){var e=Object.values(S).every((function(e){return""!==e}));w(!e)}),[S]);return(0,f.jsxs)("form",{onSubmit:O((function(){h(!0),S.role=e.role,console.log(S),l.Z.post("".concat(m.a,"/login"),S).then((function(e){var t=e.data.token;console.log(e.data.message),t&&(localStorage.setItem("token",t),N("/home"),k({email:"",password:""})),h(!1)})).catch((function(e){console.error("Error:",e),e.response&&e.response.data&&e.response.data.message?_(e.response.data.message):_("An error occurred. Please try again."),h(!1)}))})),className:"grid gap-5 pb-10 h-full max-h-[30rem]",children:[(0,f.jsx)("h1",{className:"m-auto text-black text-3xl font-bold",children:e.tittle}),(0,f.jsxs)("div",{className:"text-black grid justify-items-start",children:[(0,f.jsxs)("label",{children:["Enter Email",(0,f.jsxs)("span",{className:"text-red-600",children:[": ",null===(t=P.email)||void 0===t?void 0:t.message," ","User not found."===I||"User not found2."===I?"User not found.":""]}),(0,f.jsx)("span",{className:"text-red-600",children:"Unverified use try to login by email"===I?"Please log in with your email and complete your information.":""})]}),(0,f.jsx)("input",(0,o.Z)((0,o.Z)({type:"text"},U("email")),{},{value:S.email,onChange:R,className:"p-3 border h-11 max-w-96 w-full border-gray-400 rounded-md focus:outline-none focus:border-blue-500 bg-transparent"}))]}),(0,f.jsxs)("div",{className:"text-black grid justify-items-start",children:[(0,f.jsxs)("label",{children:["Enter Password ",(0,f.jsxs)("span",{className:"text-red-600",children:[": ",null===(s=P.password)||void 0===s?void 0:s.message," ","Authentication failed. Incorrect password."===I?"Incorrect password.":""]})]}),(0,f.jsx)("input",(0,o.Z)((0,o.Z)({type:"password",name:"password"},U("password")),{},{value:S.password,onChange:R,className:"p-3 border h-11 max-w-96 w-full border-gray-400 rounded-md focus:outline-none focus:border-blue-500 bg-transparent"}))]}),(0,f.jsxs)("p",{className:"font-bold justify-self-start text-[14px] self-end",children:["Click here to continue with a Email: ",(0,f.jsx)("a",{onClick:function(){return e.setInputStatus("d")},className:"text-blue-500 hover:text-blue-400 justify-self-end cursor-pointer",children:"Continue"})]}),(0,f.jsx)("button",{className:"rounded-md h-11 ".concat(j?"border pointer-events-none border-gray-400 text-blue-400":"bg-blue-500 text-white hover:bg-blue-400"," rounded-md h-11 font-bold text-xl"),type:"submit",disabled:x,children:x?(0,f.jsx)("span",{className:"loading loading-spinner loading-md "}):"Login"})]})},p=function(e){var t,s=(0,n.useState)(!1),i=(0,a.Z)(s,2),b=i[0],p=i[1],x=(0,n.useState)(!0),h=(0,a.Z)(x,2),g=h[0],v=h[1],j=(0,n.useState)({email:"",password:""}),w=(0,a.Z)(j,2),N=w[0],y=w[1],Z=(0,n.useState)(""),S=(0,a.Z)(Z,2),k=S[0],C=S[1],E=(0,n.useState)(""),I=(0,a.Z)(E,2),_=I[0],q=I[1],A=(0,n.useState)(!1),U=(0,a.Z)(A,2),O=U[0],P=U[1],R=u.Ry().shape({email:u.Z_().email("Invalid email format").required("Email is required")}),L=(0,d.cI)({resolver:(0,c.X)(R)}),X=L.register,G=L.handleSubmit,z=L.formState.errors;(0,n.useEffect)((function(){q("");var e=Object.values(N).every((function(e){return""===e}));v(e)}),[N]);return(0,f.jsxs)("form",{onSubmit:G((function(){P(!1),p(!0),console.log(N),N.role=e.role,l.Z.post("".concat(m.a,"/").concat("As Supplier"===N.role?"sendemailtologinRecuireteragency":"sendemailtologin"),N).then((function(e){console.log(e),y({email:""}),p(!1),P(!0)})).catch((function(e){console.error("Error:",e),q(e.response.data),console.log("Error2:",_),e.response&&e.response.data&&e.response.data.message?C(e.response.data.message):C("An error occurred. Please try again."),p(!1)}))})),className:"grid gap-5 pb-10 h-full max-h-[30rem]",children:[(0,f.jsx)("h1",{className:"m-auto text-black text-3xl font-bold",children:e.tittle}),(0,f.jsxs)("div",{className:"text-black  grid justify-items-start",children:[(0,f.jsxs)("label",{children:["Enter Email",(0,f.jsxs)("span",{className:"text-red-600",children:[": ",_," ",null===(t=z.email)||void 0===t?void 0:t.message," ","User not found."===k||"User not found2."===k?"User not found.":""]}),(0,f.jsx)("span",{className:"text-green-600",children:O?"Please check your email for the login verification link.":""})]}),(0,f.jsx)("input",(0,o.Z)((0,o.Z)({type:"text"},X("email")),{},{value:N.email,onChange:function(e){var t=e.target,s=t.name,a=t.value;y((0,o.Z)((0,o.Z)({},N),{},(0,r.Z)({},s,a)))},className:"p-3 border h-11 max-w-96 w-full border-gray-400 rounded-md focus:outline-none focus:border-blue-500 bg-transparent"}))]}),(0,f.jsxs)("p",{className:"font-bold justify-self-start text-[14px] self-end",children:["Click here to continue with a password: ",(0,f.jsx)("a",{onClick:function(){return e.setInputStatus("d")},className:"text-blue-500 hover:text-blue-400 justify-self-end cursor-pointer",children:"Continue"})]}),(0,f.jsx)("button",{className:"rounded-md h-11 ".concat(g?"border pointer-events-none border-gray-400 text-blue-400":"bg-blue-500 text-white hover:bg-blue-400"," rounded-md h-11 font-bold text-xl"),type:"submit",disabled:b,children:b?(0,f.jsx)("span",{className:"loading loading-spinner loading-md"}):"Login"})]})},x=function(){var e=(0,n.useState)("Admin"),t=(0,a.Z)(e,2),s=t[0],r=t[1],o=(0,n.useState)(!1),l=(0,a.Z)(o,2),i=l[0],d=l[1];(0,n.useEffect)((function(){console.log(i)}),[i]);var u=function(e){d(!i)};return(0,f.jsx)("div",{className:"bg-white w-[35rem]  p-[2rem] shadow-[rgba(50,50,93,0.25)_0px_6px_12px_-2px,_rgba(0,0,0,0.3)_0px_3px_7px_-3px]",children:(0,f.jsxs)("nav",{className:"grid items-center gap-3 ",children:[(0,f.jsx)("h1",{className:"font-bold text-[30px] ",children:"LOGIN"}),(0,f.jsxs)("div",{role:"tablist",className:"justify-self-center tabs-bordered tabs",children:[(0,f.jsx)("a",{onClick:function(){return r("Requiter")},role:"tab",className:"tab ".concat("Requiter"===s?"tab-active font-bold":""," transition duration-300 ease-in-out"),children:"Requiter"}),(0,f.jsx)("a",{onClick:function(){return r("Admin")},role:"tab",className:"tab ".concat("Admin"===s?"tab-active font-bold":""," transition duration-300 ease-in-out"),children:"Admin"}),(0,f.jsx)("a",{onClick:function(){return r("Owner")},role:"tab",className:"tab ".concat("Owner"===s?"tab-active font-bold":""," transition duration-300 ease-in-out"),children:"Owner"})]}),i?(0,f.jsx)(b,{setInputStatus:u,role:s}):(0,f.jsx)(p,{setInputStatus:u,role:s})]})})}},9158:function(e,t,s){s.d(t,{a:function(){return a}});var a="http://localhost:8080"}}]);
//# sourceMappingURL=399.655723e2.chunk.js.map